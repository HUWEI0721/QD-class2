import{a as m,c as d}from"./index-D5g6VmwX.js";import{E as a}from"./elementPlus-CHQYLhPp.js";const g=d.apiBaseUrl,t=m.create({baseURL:g,timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e));t.interceptors.response.use(e=>e,async e=>{var s,i,o,r,n,l;return((s=e.response)==null?void 0:s.status)===401?(localStorage.removeItem("token"),delete m.defaults.headers.common.Authorization,window.location.pathname!=="/login"&&(a.error("登录已过期，请重新登录"),window.location.href="/login")):((i=e.response)==null?void 0:i.status)===403?a.error("权限不足"):((o=e.response)==null?void 0:o.status)===404?a.error("请求的资源不存在"):((r=e.response)==null?void 0:r.status)>=500?a.error("服务器错误，请稍后重试"):a.error(((l=(n=e.response)==null?void 0:n.data)==null?void 0:l.detail)||"请求失败"),Promise.reject(e)});const p={auth:{login:e=>t.post("/auth/login",e),register:e=>t.post("/auth/register",e),getCurrentUser:()=>t.get("/auth/me"),logout:()=>t.post("/auth/logout")},users:{getAll:(e={})=>t.get("/users/",{params:e}),getById:e=>t.get(`/users/${e}`),updateProfile:e=>t.put("/users/me",e),getStats:()=>t.get("/users/stats/summary")},activities:{getAll:(e={})=>t.get("/activities/",{params:e}),getById:e=>t.get(`/activities/${e}`),create:e=>t.post("/activities/",e),update:(e,s)=>t.put(`/activities/${e}`,s),delete:e=>t.delete(`/activities/${e}`),getStats:()=>t.get("/activities/stats/summary")},media:{getAll:(e={})=>t.get("/media/",{params:e}),getById:e=>t.get(`/media/${e}`),upload:e=>t.post("/media/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>t.delete(`/media/${e}`),getStats:()=>t.get("/media/stats/summary")},comments:{getByMediaId:(e,s={})=>t.get(`/comments/media/${e}`,{params:s}),getById:e=>t.get(`/comments/${e}`),create:e=>t.post("/comments/",e),delete:e=>t.delete(`/comments/${e}`)},notifications:{getAll:(e={})=>t.get("/notifications/",{params:e}),markAsRead:e=>t.put(`/notifications/${e}/read`),markAllAsRead:()=>t.put("/notifications/mark-all-read"),delete:e=>t.delete(`/notifications/${e}`),getStats:()=>t.get("/notifications/stats")}};export{p as a};
