import{u as Y}from"./index-D5g6VmwX.js";import{a as p}from"./index-BfJ1v8kG.js";import{E,d as L}from"./elementPlus-CHQYLhPp.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as H,r as C,h as U,z as u,R as o,B as t,J as e,al as l,A as v,P as d,u as j,Q as q,a6 as z,O as w}from"./vendor-Kw1AtJDw.js";const F={class:"home-view"},I={class:"welcome-content"},J={class:"welcome-text"},O={class:"welcome-stats"},Q={class:"stat-item"},R={class:"stat-content"},T={class:"stat-number"},G={class:"stat-item"},K={class:"stat-content"},W={class:"stat-number"},X={class:"stat-item"},Z={class:"stat-content"},tt={class:"stat-number"},st={class:"quick-actions"},ot={class:"action-content"},et={class:"action-content"},at={class:"action-content"},nt={class:"action-content"},lt={class:"card-header"},it={key:0,class:"empty-state"},dt={key:1,class:"activities-list"},ct={class:"activity-date"},rt={class:"date-day"},_t={class:"date-month"},ut={class:"activity-content"},vt={class:"activity-meta"},mt={class:"news-list"},pt={class:"news-item"},ft={class:"news-item"},wt={__name:"HomeView",setup(ht){const $=Y(),r=H({totalStudents:0,totalActivities:0,totalPhotos:0}),f=C([]),h=C(!1),S=(i,s="YYYY-MM-DD")=>L(i).format(s),b=async()=>{h.value=!0;try{const[i,s,_,n]=await Promise.all([p.users.getStats(),p.activities.getStats(),p.media.getStats(),p.activities.getAll({limit:5})]);r.totalStudents=i.data.total_users,r.totalActivities=s.data.total_activities,r.totalPhotos=_.data.total_photos,f.value=n.data}catch(i){console.error("加载数据失败:",i),E.error("加载数据失败，请刷新页面重试")}finally{h.value=!1}};return U(()=>{b()}),(i,s)=>{const _=l("User"),n=l("el-icon"),k=l("Calendar"),y=l("Picture"),c=l("el-card"),m=l("el-col"),A=l("Setting"),D=l("el-row"),M=l("router-link"),P=l("el-empty"),B=l("Location"),V=l("Star"),x=l("Bell");return v(),u("div",F,[o(c,{class:"welcome-card",shadow:"hover"},{default:e(()=>{var a;return[t("div",I,[t("div",J,[t("h1",null,"欢迎回来，"+d((a=j($).user)==null?void 0:a.full_name)+"！",1),s[4]||(s[4]=t("p",null,"这里是我们班级的数字家园，记录美好时光，分享精彩瞬间",-1))]),t("div",O,[t("div",Q,[o(n,{class:"stat-icon"},{default:e(()=>[o(_)]),_:1}),t("div",R,[t("div",T,d(r.totalStudents),1),s[5]||(s[5]=t("div",{class:"stat-label"},"班级成员",-1))])]),t("div",G,[o(n,{class:"stat-icon"},{default:e(()=>[o(k)]),_:1}),t("div",K,[t("div",W,d(r.totalActivities),1),s[6]||(s[6]=t("div",{class:"stat-label"},"班级活动",-1))])]),t("div",X,[o(n,{class:"stat-icon"},{default:e(()=>[o(y)]),_:1}),t("div",Z,[t("div",tt,d(r.totalPhotos),1),s[7]||(s[7]=t("div",{class:"stat-label"},"照片视频",-1))])])])])]}),_:1}),t("div",st,[o(D,{gutter:20},{default:e(()=>[o(m,{span:6},{default:e(()=>[o(c,{class:"action-card",shadow:"hover",onClick:s[0]||(s[0]=a=>i.$router.push("/classmates"))},{default:e(()=>[t("div",ot,[o(n,{class:"action-icon"},{default:e(()=>[o(_)]),_:1}),s[8]||(s[8]=t("h3",null,"班级同学",-1)),s[9]||(s[9]=t("p",null,"查看班级成员信息",-1))])]),_:1})]),_:1}),o(m,{span:6},{default:e(()=>[o(c,{class:"action-card",shadow:"hover",onClick:s[1]||(s[1]=a=>i.$router.push("/activities"))},{default:e(()=>[t("div",et,[o(n,{class:"action-icon"},{default:e(()=>[o(k)]),_:1}),s[10]||(s[10]=t("h3",null,"班级活动",-1)),s[11]||(s[11]=t("p",null,"浏览班级活动安排",-1))])]),_:1})]),_:1}),o(m,{span:6},{default:e(()=>[o(c,{class:"action-card",shadow:"hover",onClick:s[2]||(s[2]=a=>i.$router.push("/photos"))},{default:e(()=>[t("div",at,[o(n,{class:"action-icon"},{default:e(()=>[o(y)]),_:1}),s[12]||(s[12]=t("h3",null,"照片视频",-1)),s[13]||(s[13]=t("p",null,"分享美好回忆",-1))])]),_:1})]),_:1}),o(m,{span:6},{default:e(()=>[o(c,{class:"action-card",shadow:"hover",onClick:s[3]||(s[3]=a=>i.$router.push("/profile"))},{default:e(()=>[t("div",nt,[o(n,{class:"action-icon"},{default:e(()=>[o(A)]),_:1}),s[14]||(s[14]=t("h3",null,"个人资料",-1)),s[15]||(s[15]=t("p",null,"管理个人信息",-1))])]),_:1})]),_:1})]),_:1})]),o(c,{class:"recent-activities",shadow:"hover"},{header:e(()=>[t("div",lt,[s[17]||(s[17]=t("span",{class:"card-title"},"最新活动",-1)),o(M,{to:"/activities",class:"more-link"},{default:e(()=>[...s[16]||(s[16]=[w("查看更多",-1)])]),_:1})])]),default:e(()=>[f.value.length===0?(v(),u("div",it,[o(P,{description:"暂无活动记录"})])):(v(),u("div",dt,[(v(!0),u(q,null,z(f.value,a=>{var g;return v(),u("div",{key:a.id,class:"activity-item"},[t("div",ct,[t("div",rt,d(S(a.activity_date,"DD")),1),t("div",_t,d(S(a.activity_date,"MMM")),1)]),t("div",ut,[t("h4",null,d(a.title),1),t("p",null,d(a.description),1),t("div",vt,[t("span",null,[o(n,null,{default:e(()=>[o(B)]),_:1}),w(d(a.location||"待定"),1)]),t("span",null,[o(n,null,{default:e(()=>[o(_)]),_:1}),w(d((g=a.creator)==null?void 0:g.full_name),1)])])])])}),128))]))]),_:1}),o(c,{class:"class-news",shadow:"hover"},{header:e(()=>[...s[18]||(s[18]=[t("div",{class:"card-header"},[t("span",{class:"card-title"},"班级动态")],-1)])]),default:e(()=>[t("div",mt,[t("div",pt,[o(n,{class:"news-icon"},{default:e(()=>[o(V)]),_:1}),s[19]||(s[19]=t("div",{class:"news-content"},[t("span",{class:"news-text"},"欢迎使用班级建设网站！"),t("span",{class:"news-time"},"刚刚")],-1))]),t("div",ft,[o(n,{class:"news-icon"},{default:e(()=>[o(x)]),_:1}),s[20]||(s[20]=t("div",{class:"news-content"},[t("span",{class:"news-text"},"系统已为您开启消息通知"),t("span",{class:"news-time"},"1分钟前")],-1))])])]),_:1})])}}},$t=N(wt,[["__scopeId","data-v-5e8c0b2d"]]);export{$t as default};
